<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Criar Conta - Galeria de Jogos</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <script>
    document.getElementById('create-account-form').addEventListener('submit', function(event) {
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirm-password').value;

      if (password !== confirmPassword) {
        event.preventDefault();
        alert('As senhas não coincidem!');
      }
    });
  </script>

  <script>
  document.getElementById('create-account-form').addEventListener('submit', function(event) {
    event.preventDefault(); // impedir envio do form

    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value;
    const confirmPassword = document.getElementById('confirm-password').value;

    if (password !== confirmPassword) {
      alert('As senhas não coincidem!');
      return;
    }

    let users = JSON.parse(localStorage.getItem('users')) || [
      { username: "admin", password: "1234", role: "admin" }
    ];

    if (users.find(u => u.username === username)) {
      alert('Esse nome de usuário já existe.');
      return;
    }

    users.push({ username, password, role: "user" });
    localStorage.setItem('users', JSON.stringify(users));
    
    alert('Conta criada com sucesso!');
    window.location.href = 'index.html'; // redirecionar para login
  });
</script>

<form action="php/register.php" method="POST"

style="
    background-color:#1e1e2f; 
    border: 2px solid #00ffe1; 
    padding: 10px; 
    border-radius: 12px; 
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
    width: 40%;
    max-width: 40%;
    margin: 15% auto;
    text-align: center;
    font-family: 'Arial', sans-serif;"

>
  <h2>Criar Conta</h2>
  <input style="
          background-color:#1e1e2f; 
          border: 2px solid #00ffe1; 
          padding: 10px; 
          border-radius: 12px; 
          box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
          width: 50%;
          max-width: 30%;
          font-family: Arial, sans-serif;
          text-align: center;
          color: white;"

  name="username" type="text" placeholder="Utilizador" required><br><br>

  <input style="
          background-color:#1e1e2f; 
          border: 2px solid #00ffe1; 
          padding: 10px; 
          border-radius: 12px; 
          box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
          width: 50%;
          max-width: 30%;
          font-family: Arial, sans-serif;
          text-align: center;
          color: white;"
  
  name="password" type="password" placeholder="Palavra-Passe" required><br><br><br>

  <button style="
            background-color:#1e1e2f; 
            border: 2px solid #00ffe1; 
            padding: 10px; 
            border-radius: 12px; 
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            width: 50%;
            max-width: 30%;
            font-family: 'Arial', sans-serif;
            text-align: center;
            color: rgba(255, 255, 255, 0.997);"

  type="submit">Criar Conta</button>

  <p class="login-link">
          Já tem uma conta? <a href="index.html">Fazer login</a>
  </p>

</form>

</body>
</html>
